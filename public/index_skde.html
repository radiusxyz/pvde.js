<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>Delay encryption in wasm</title>
  </head>

  <body>
    <script type="module">
      import { pvde, skde } from "../src/index.js";

      async function runWasm() {
        try {
          const skde_params = {
            n: "109108784166676529682340577929498188950239585527883687884827626040722072371127456712391033422811328348170518576414206624244823392702116014678887602655605057984874271545556188865755301275371611259397284800785551682318694176857633188036311000733221068448165870969366710007572931433736793827320953175136545355129",
            g: "4",
            t: 4,
            h: "4294967296",
            max_sequencer_number: "2",
          };

          const message =
            "0xf869018203e882520894f17f52151ebef6c7334fad080c5704d77216b732881bc16d674ec80000801ba02da1c48b670996dcb1f447ef9ef00b33033c48a4fe";
          const encryption_key = {
            pk: "27897411317866240410600830526788165981341969904039758194675272671868652866892274441298243014317800177611419642993059565060538386730472765976439751299066279239018615809165217144853299923809516494049479159549907327351509242281465077907977695359158281231729142725042643997952251325328973964444619144348848423785",
          };
          const decryption_key = {
            sk: "38833048300325516141445839739644018404110477961707775037115236576780421892476578378034582536195146817009345764092161668346878367282186498795101059094681709712929905024483143171658282800283336368593335787557451643648363431385562973837024404466434120134771798848006526362428133799287842185760112952945802615179",
          };

          const cipherMessage = await skde.encryptMessage(
            skde_params,
            message,
            encryption_key
          );
          const decrypted = await skde.decryptCipher(
            skde_params,
            cipherMessage,
            decryption_key
          );
        } catch (error) {
          console.error("An error occurred during encryption:", error);
        }
      }

      runWasm();
    </script>
  </body>
</html>
